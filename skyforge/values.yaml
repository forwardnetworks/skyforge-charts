# Skyforge Helm values.
# Override anything here with your local deployment details.

skyforge:
  hostname: "skyforge.lab.local"
  domain: "lab.local"
  # Optional cookie Domain attribute. Leave empty for host-only cookies.
  # If you enable any Skyforge tools on a subdomain (e.g. Hoppscotch at
  # `tool.<skyforge.hostname>`), set this to a common parent domain like
  # `.skyforge.lab.local` so SSO cookies work across subdomains.
  cookieDomain: ""
  adminUsers: "skyforge"
  awsSsoRegion: "us-east-1"
  awsSsoStartUrl: ""
  gitea:
    apiUrl: ""
    url: ""
    username: "skyforge"
    repoPrivate: true
    adminUsername: "skyforge"
    allowedDomains: ""
  netboxSsoUrl: ""
  nautobotSsoUrl: ""
  eveApiUrl: ""
  eveUsername: ""
  eveSkipTlsVerify: false
  eveUrl: ""
  eveSshUser: "root"
  labppApiUrl: ""
  labppSkipTlsVerify: false
  # Optional: expose LabPP API through Traefik on the Skyforge hostname.
  # When enabled, this creates Services/Endpoints that point at external EVE hosts and routes:
  #   https://<skyforge-hostname>/labpp/<name>/*  ->  https://<eve-ip>:443/labpp/*
  labppProxy:
    enabled: false
    port: 443
    serversTransport: "eve-servers-transport"
    servers: []
  # Optional: expose EVE-NG UI through Traefik on the Skyforge hostname.
  # When enabled, this creates Services/Endpoints that point at external EVE hosts and routes:
  #   https://<skyforge-hostname>/labs/<name>/*  ->  https://<eve-ip>:443/*
  eveProxy:
    enabled: false
    port: 443
    serversTransport: "eve-servers-transport"
    servers: []
  ldap:
    displayAttr: "cn"
    groupAttr: "memberOf"
    mailAttr: "mail"
    skipTlsVerify: false
    startTls: false
    baseDn: ""
  listenAddr: ":8085"
  maxGroups: 50
  platformDataDir: "/data"
  ssoSkipTlsVerify: false
  netboxUrl: ""
  netboxMgmtSubnet: "10.255.0.0/24"
  nautobotUrl: ""
  objectStorage:
    endpoint: "minio:9000"
    useSsl: false
  netlab:
    sshUser: "ubuntu"
    stateRoot: "/var/lib/skyforge/netlab"
  dns:
    enabled: false
    # NodePort for UDP/TCP 53 on the k3s host.
    nodePort: 30053
    # NodePort for the DNS web UI on the k3s host.
    webNodePort: 30380
  workspacesDataDir: "/var/lib/skyforge"
  workspaceSyncSeconds: 300
  uiThemeDefault: ""
  sessionTtl: "8h"
  pkiDefaultDays: 365
  sshDefaultDays: 30
  cookieSecure: false
  stateBackend: "postgres"
  swaggerUrl: ""
  db:
    host: "db"
    port: 5432
    name: "skyforge_server"
    user: "skyforge_server"
    sslmode: "disable"
  redis:
    enabled: true
    addr: "redis:6379"
    db: 0
    keyPrefix: "skyforge"
  health:
    httpChecks: "Edge|edge|http://skyforge-portal:3000/|/;Skyforge Server|server|http://skyforge-server:8085/api/health|/skyforge-server/health;EVE-NG|ðŸ§ª|http://skyforge-server:8085/api/health/eve|/labs/;NetBox|netbox|http://netbox:8080/netbox/login/|/netbox/;Nautobot|nautobot|http://nautobot:8080/login/|/nautobot/;Git|git|http://gitea:3000/|/git/;VS Code Server|code|http://code-server:8080/code/|/code/;API Testing|api|http://hoppscotch/|/?app=hoppscotch;Swagger UI|swagger|http://swagger-ui:8080/|/swagger/;Webhook Inbox|webhooks|http://skyforge-portal:3000/webhooks|/webhooks/"
    codeChecks: "Postgres|postgres|pg|db;Redis|redis|redis|redis;RADIUS|radius|radius|freeradius"
  admin:
    username: "skyforge"
    name: "Skyforge"
  provisioner:
    login: "skyforge-provisioner"
    name: "Skyforge Provisioner"
  ui:
    productName: "Skyforge"
    productSubtitle: "Automation Hub"
    logoUrl: "/assets/skyforge/FN-logo.svg"
    logoAlt: "Skyforge"
    headerBgUrl: "/assets/skyforge/header-background.png"
    supportText: "Need access? Contact your platform admin."
    supportUrl: ""
  minio:
    consoleSubpath: "/minio-console"
    # Optional: LDAP group to grant MinIO Console access + read/write bucket access.
    # If empty, LDAP users may be able to authenticate but lack permissions.
    ldapConsoleGroup: ""
  sessionCookie: "skyforge_session"
  syslog:
    enabled: false
    # Syslog events are collected via Vector (DaemonSet, hostNetwork).
    # Host port to bind on each node (UDP); defaults to 514.
    hostPort: 514
  snmpTraps:
    enabled: false
    # SNMP trap events are collected via Telegraf (DaemonSet, hostNetwork).
    # Host port to bind on each node (UDP); defaults to 162.
    hostPort: 162
  nodeMetrics:
    enabled: false
    interval: "10s"

images:
  alpine: "alpine:3.20"
  vector: "timberio/vector:0.44.0-debian"
  telegraf: "telegraf:1.33-alpine"
  freeradius: "freeradius/freeradius-server:3.2.5"
  gitea: "gitea/gitea:1.22.3-rootless"
  openvscode: "gitpod/openvscode-server:1.105.1"
  hoppscotch: "docker.io/hoppscotch/hoppscotch@sha256:0bf0d0c1a34399d8bc4a0d89126b41c717db771c5a451d69d076cb4305b9eaff"
  minio: "minio/minio:RELEASE.2024-11-07T00-52-20Z"
  minioMc: "minio/mc:RELEASE.2024-11-17T19-35-25Z"
  minioMcRelease: "minio/mc:RELEASE.2024-11-17T19-35-25Z"
  postgres: "postgres:15-alpine"
  redis: "redis:7-alpine"
  swaggerUi: "swaggerapi/swagger-ui:v5.11.0"
  technitiumDns: "docker.io/technitium/dns-server@sha256:94f2b90d63f03181421152157a8099ea2752b13fa30b6c96833859be8e93dfa9"
  atlas: "docker.io/arigaio/atlas@sha256:1139e29a47364e642cc2f4912fd2ff7c8b31a23886fdbf7bfdfdf50b39625190"
  skyforgeNautobot: "skyforge-nautobot:latest"
  skyforgeNetbox: "skyforge-netbox:latest"
  skyforgePortal: "ghcr.io/forwardnetworks/skyforge-portal:20260105-0928"
  skyforgeServer: "ghcr.io/forwardnetworks/skyforge-server:20260105-1226"

kubernetes:
  # Optional image pull secrets to attach to service accounts created by the chart.
  # Example: ["ghcr-pull"] for private GHCR images.
  imagePullSecrets: []

secrets:
  create: true
  items:
    skyforge-session-secret:
      skyforge-session-secret: ""
    skyforge-admin-shared:
      password: ""
    skyforge-ldap-url:
      skyforge-ldap-url: ""
    skyforge-ldap-bind-template:
      skyforge-ldap-bind-template: ""
    skyforge-internal-token:
      skyforge-internal-token: ""
    skyforge-eve-password:
      skyforge-eve-password: ""
    skyforge-eve-servers:
      skyforge-eve-servers: "[]"
    skyforge-netlab-servers:
      skyforge-netlab-servers: "[]"
    netlab-runner-rsa:
      netlab-runner-rsa: ""
    eve-runner-ssh-key:
      eve-runner-ssh-key: ""
    postgres-skyforge-password:
      postgres-skyforge-password: ""
    db-netbox-password:
      db-netbox-password: ""
    db-nautobot-password:
      db-nautobot-password: ""
    db-gitea-password:
      db-gitea-password: ""
    db-hoppscotch-password:
      db-hoppscotch-password: ""
    db-skyforge-server-password:
      db-skyforge-server-password: ""
    gitea-secret-key:
      gitea-secret-key: ""
    gitea-ldap-binddn:
      gitea-ldap-binddn: ""
    gitea-ldap-bindpassword:
      gitea-ldap-bindpassword: ""
    hoppscotch-secrets:
      database_url: ""
      data-encryption-key: ""
    object-storage-root-user:
      object-storage-root-user: ""
    object-storage-root-password:
      object-storage-root-password: ""
    object-storage-terraform-access-key:
      object-storage-terraform-access-key: ""
    object-storage-terraform-secret-key:
      object-storage-terraform-secret-key: ""
    netbox-superuser-api-token:
      netbox-superuser-api-token: ""
    netbox-secret-key:
      netbox-secret-key: ""
    nautobot-superuser-api-token:
      nautobot-superuser-api-token: ""
    nautobot-secret-key:
      nautobot-secret-key: ""
    code-server-password:
      code-server-password: ""
    object-storage-artifacts-access-key:
      object-storage-artifacts-access-key: ""
    object-storage-artifacts-secret-key:
      object-storage-artifacts-secret-key: ""
    aws-terraform-shared-credentials:
      aws-terraform-shared-credentials: ""
    skyforge-pki-ca-cert:
      skyforge-pki-ca-cert: ""
    skyforge-pki-ca-key:
      skyforge-pki-ca-key: ""
    proxy-tls:
      tls.crt: ""
      tls.key: ""
      _type: "kubernetes.io/tls"
    skyforge-ca-cert:
      skyforge-ca-cert: ""
