# Skyforge Helm values.
# Override anything here with your local deployment details.

skyforge:
  serverReplicaCount: 1
  portalReplicaCount: 2
  # Optional dedicated worker deployment replica count. When > 0, the chart
  # creates a separate Deployment that runs the task worker.
  workerReplicaCount: 0
  # Schedules for worker bridge CronJobs.
  workerCron:
    heartbeatSchedule: "* * * * *"
    reconcileQueuedSchedule: "* * * * *"
    pollQueuedSchedule: "* * * * *"
    reconcileRunningSchedule: "*/10 * * * *"
    userContextSyncSchedule: "*/5 * * * *"
    cloudCredentialChecksSchedule: "*/30 * * * *"
    successfulJobsHistoryLimit: 1
    failedJobsHistoryLimit: 1
    ttlSecondsAfterFinished: 1800

  # Optional: run a standalone Atlas migration Job as a Helm hook.
  #
  # This is normally unnecessary because `skyforge-server` already runs migrations
  # in an initContainer before starting the API. Keeping this disabled avoids
  # hook-related upgrade failures when the cluster is temporarily unhealthy.
  migrateJob:
    enabled: false

  # Resources for the worker Deployment. Strongly recommended when using the HPA.
  workerResources:
    requests:
      cpu: "250m"
      memory: "1Gi"
    limits: {}

  # Optional autoscaling for the worker Deployment.
  #
  # Notes:
  # - Requires metrics-server in the cluster.
  # - CPU utilization requires `resources.requests.cpu` to be set (see workerResources).
  workerAutoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    # Set to 0 to disable.
    targetMemoryUtilizationPercentage: 0

  # Optional: provide ENCORE_RUNTIME_CONFIG for Encore runtime infrastructure config.
  # NOTE: This is NOT the same as typed Encore config loaded via config.Load.
  encoreRuntimeConfig:
    create: false
    json: "{}"
    workerCreate: false
    workerJson: "{}"

  # Optional: provide ENCORE_CFG_SKYFORGE for typed Encore config (config.Load).
  # The value must be a JSON object; the chart will base64url-encode it.
  # Keep it non-secret: do not include passwords/tokens here.
  encoreCfg:
    create: true
    json: "{}"
    workerCreate: false
    # Note: when workerCreate is true, the chart forces `"TaskWorkerEnabled": true` in the worker config payload.
    workerJson: "{}"
  hostname: "skyforge.lab.local"
  domain: "lab.local"
  # Skyforge uses Cilium Gateway API for ingress (no Traefik).
  # Optional cookie Domain attribute. Leave empty for host-only cookies.
  # If you enable any Skyforge tools on a subdomain (e.g. Hoppscotch at
  # `tool.<skyforge.hostname>`), set this to a common parent domain like
  # `.skyforge.lab.local` so SSO cookies work across subdomains.
  cookieDomain: ""
  adminUsers: "skyforge"
  awsSsoRegion: "us-east-1"
  awsSsoStartUrl: ""
  gitea:
    enabled: true
    apiUrl: ""
    url: ""
    username: "skyforge"
    repoPrivate: true
    adminUsername: "skyforge"
    allowedDomains: ""
  registry:
    # Container image registry used by the Designer palette.
    # Example: https://ghcr.io
    url: ""
    # Optional comma-separated prefixes to include (e.g. "forwardnetworks,lab").
    repoPrefixes: ""
    skipTlsVerify: false
    # Optional registry credentials (Kubernetes Secret name/key).
    usernameSecretName: "skyforge-registry-username"
    usernameSecretKey: "skyforge-registry-username"
    passwordSecretName: "skyforge-registry-password"
    passwordSecretKey: "skyforge-registry-password"
  netboxSsoUrl: ""
  nautobotSsoUrl: ""
  # Public base URL for Skyforge (used for webhook and SNMP instructions).
  publicUrl: ""
  # Deprecated: use `skyforge.publicUrl` instead.
  labsPublicUrl: ""
  ldap:
    displayAttr: "cn"
    groupAttr: "memberOf"
    mailAttr: "mail"
    skipTlsVerify: false
    startTls: false
    baseDn: ""
  oidc:
    discoveryUrl: "http://dex:5556/dex"
  listenAddr: ":8085"
  # Enables test-only /api/admin/e2e/session and /api/admin/e2e/sshprobe endpoints.
  e2eAdminEnabled: true
  maxGroups: 50
  ssoSkipTlsVerify: false
  netbox:
    enabled: false
    # Redis database index for NetBox (shared Redis service).
    # Keep distinct from Skyforge (0) and Nautobot (1).
    redisDatabase: 2
  netboxUrl: ""
  netboxMgmtSubnet: "10.255.0.0/24"
  nautobot:
    enabled: false
    # Redis database index for Nautobot (shared Redis service).
    # Keep distinct from Skyforge (0) and NetBox (2).
    redisDatabase: 1
    bootstrap:
      # Nautobot bootstrap is a one-time operation. Leaving this enabled causes Helm
      # upgrades with `--wait` to hang/fail if the bootstrap job ever fails (and it is
      # not required for steady-state operation).
      enabled: false
  nautobotUrl: ""
  yaadeUrl: "http://yaade"
  yaadeAdminUsername: "admin"
  yaade:
    enabled: true
  gemini:
    enabled: false
    # Google OAuth client ID for per-user "Connect Gemini".
    clientID: ""
    # Optional override (default is derived from skyforge.publicUrl/hostname):
    #   https://<skyforge.hostname>/api/user/integrations/gemini/callback
    redirectURL: ""
    # Vertex AI settings used by the AI template generator.
    # These are not required for OAuth connect/disconnect, but are required to
    # actually call Gemini to generate templates.
    projectId: ""
    location: "us-central1"
    # Primary and fallback model IDs passed to the Vertex AI publisher endpoint.
    # We default to Gemini 3.0, with a pro -> flash fallback.
    model: "gemini-3.0-pro"
    fallbackModel: "gemini-3.0-flash"
    # Kubernetes Secret (name/key) containing the OAuth client secret.
    clientSecretSecretName: "skyforge-gemini-oauth-client-secret"
    clientSecretSecretKey: "skyforge-gemini-oauth-client-secret"
  ai:
    enabled: false

  elastic:
    # Optional: in-cluster Elasticsearch + Kibana (SSO-protected via Envoy ext_authz).
    #
    # NOTE: Elastic images are under the Elastic license (not Apache 2.0). Keep this
    # disabled by default for OSS-friendly installs unless you explicitly want Elastic.
    enabled: false
    # Optional override for the in-cluster ES URL used by Skyforge for indexing ingest events.
    # When empty and enabled=true, defaults to "http://elasticsearch:9200".
    url: ""
    # Prefix for Skyforge-managed indices (e.g. "<prefix>-syslog-YYYY.MM.DD").
    indexPrefix: "skyforge"
    # Index naming mode:
    # - "instance": <indexPrefix>-<category>-YYYY.MM.DD
    # - "per_user": <indexPrefix>-u-<username>-<category>-YYYY.MM.DD
    indexingMode: "instance"
    autosleep:
      # Demo-friendly autosleep for in-cluster Elasticsearch + Kibana.
      enabled: false
      # Idle minutes before scaling both Elasticsearch and Kibana to 0 replicas.
      idleMinutes: 30
      # Cron schedule for autosleep checks.
      schedule: "*/5 * * * *"
      successfulJobsHistoryLimit: 1
      failedJobsHistoryLimit: 1
      ttlSecondsAfterFinished: 1800
    kibanaSubpath: "/kibana"
    elasticsearch:
      # Single-node dev settings.
      javaOpts: "-Xms1g -Xmx1g"
      storage:
        enabled: true
        size: "50Gi"
        # Optional: set to your storageClass (e.g. longhorn). Empty uses cluster default.
        storageClassName: ""
      resources:
        requests:
          cpu: "500m"
          memory: "2Gi"
        limits: {}
    kibana:
      resources:
        requests:
          cpu: "250m"
          memory: "512Mi"
        limits: {}

  # Optional Kubernetes admission policies that harden the cluster against
  # accidental non-native clabernetes deployments (Docker-in-Docker / docker.sock).
  #
  # Requires Kubernetes v1.30+ (ValidatingAdmissionPolicy).
  admissionPolicies:
    enabled: false
    # Namespace selector for enforcement (only namespaces matching this label are checked).
    namespaceSelectorLabel: "skyforge-managed"
    namespaceSelectorValue: "true"
    # Require Topology.spec.deployment.nativeMode == true (deny CREATE/UPDATE otherwise).
    requireClabernetesNativeMode: true
    # Deny Pods that mount /var/run/docker.sock via hostPath.
    forbidDockerSock: true
  staticRoot: "/opt/skyforge/static"
  objectStorage:
    endpoint: "minio:9000"
    useSsl: false
    # Kubernetes Secret (name/key) that holds the MinIO access key used by
    # Skyforge artifact storage.
    #
    # Defaults match the existing secret names; you can rename the underlying
    # Secrets (for example, dropping "-terraform") by overriding these values.
    #
    # Note: Gitea uses its own object storage credentials (object-storage-access-key /
    # object-storage-secret-key) scoped to the "gitea" bucket.
    accessKeySecretName: "object-storage-artifacts-access-key"
    accessKeySecretKey: "object-storage-artifacts-access-key"
    secretKeySecretName: "object-storage-artifacts-secret-key"
    secretKeySecretKey: "object-storage-artifacts-secret-key"
  terraform:
    path: ""
    version: ""
    url: ""
  netlab:
    sshUser: "ubuntu"
    stateRoot: "/var/lib/skyforge/netlab"
  netlabC9s:
    # Netlab (cluster-native) uses an in-cluster generator Job to run `netlab create`
    # and emit clabernetes-ready artifacts (ConfigMaps + manifest).
    # NOTE: Override this with a pinned tag in your deploy values for reproducibility.
    generatorImage: "ghcr.io/forwardnetworks/skyforge-netlab-generator:latest"
    generatorPullPolicy: "IfNotPresent"
    applierImage: "ghcr.io/forwardnetworks/skyforge-netlab-applier:latest"
    applierPullPolicy: "IfNotPresent"
    # Optional environment defaults applied cluster-wide to netlab-c9s/clabernetes
    # runs when a deployment does not set an explicit override.
    # Example:
    # defaultEnvironment:
    #   SKYFORGE_CLABERNETES_SCHEDULING_MODE: "adaptive"
    #   SKYFORGE_NETLAB_JOB_TTL_SECONDS: "1800"
    defaultEnvironment: {}
  imagePrewarm:
    # Optional: periodically pre-pull selected images on every node to reduce
    # first-boot latency for heavy NOS deployments.
    enabled: false
    # Internal pull loop interval (seconds) per node.
    intervalSeconds: 1800
    # Prewarmer image must include `ctr` and a shell.
    image: "rancher/k3s:v1.31.5-k3s1"
    pullPolicy: "IfNotPresent"
    # k3s containerd socket on the node.
    containerdSocket: "/run/k3s/containerd/containerd.sock"
    # Optional node placement controls.
    nodeSelector: {}
    tolerations: []
    # Optional registry credentials for ctr pulls.
    registryAuth:
      usernameSecretName: ""
      usernameSecretKey: ""
      passwordSecretName: ""
      passwordSecretKey: ""
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits: {}
    # Images to pre-pull on each interval.
    images: []
  dns:
    enabled: false
    adminUsername: "admin"
    userZoneSuffix: "skyforge"
    # NodePort for UDP/TCP 53 on the k3s host.
    nodePort: 30053
    # NodePort for the DNS web UI on the k3s host.
    webNodePort: 30380
  # Per-user storage and routing controls.
  userDataDir: "/var/lib/skyforge"
  userDeleteMode: "live"
  userSyncSeconds: 300
  userRoutesStrict: true
  # Deprecated compatibility keys (use the user* keys above).
  scopesDataDir: ""
  scopeDeleteMode: ""
  scopeSyncSeconds: 0
  scopeRoutesStrict: null
  # Optional cluster hygiene cleanup for stale Jobs and stale ws-e2e namespaces.
  # This is intended for aggressive test-environment cleanup to reduce clutter
  # and control API/object bloat after repeated migration and E2E cycles.
  housekeeping:
    enabled: false
    schedule: "*/30 * * * *"
    successfulJobsHistoryLimit: 1
    failedJobsHistoryLimit: 1
    ttlSecondsAfterFinished: 1800
    # Retention for terminal Jobs in the release namespace.
    # Successful and failed Jobs are handled independently.
    successfulJobRetentionMinutes: 30
    failedJobRetentionMinutes: 120
    # Backward-compatible key; used only when the minute-specific keys are not set.
    jobRetentionHours: 2
    # Namespace prefixes considered stale-lab candidates.
    namespacePrefixes:
      - "ws-e2e-"
      - "ws-workspace-"
    # Backward-compatible key; merged with namespacePrefixes when set.
    e2eNamespacePrefix: "ws-e2e-"
    namespaceRetentionHours: 24
    # Backward-compatible key for namespaceRetentionHours.
    e2eNamespaceRetentionHours: 24
    # Skip deletion when this label key/value is present on the namespace.
    protectedNamespaceLabelKey: "skyforge.cleanup/protected"
    protectedNamespaceLabelValue: "true"
    # When false, namespaces with any Running pods are skipped.
    deleteRunningNamespaces: false
  uiThemeDefault: ""
  # Typed config equivalent of SKYFORGE_NOTIFICATIONS_ENABLED. Default true.
  notificationsEnabled: true
  forward:
    # Enable Forward Networks integration (collector deployment + sync actions).
    # When false, Skyforge hides Forward UI and disables Forward API endpoints.
    enabled: true
    snmpPlaceholderEnabled: true
    snmpCommunity: "public"
  forwardCollector:
    # Optional: enable the in-cluster Forward collector by configuring the image.
    # When empty, Skyforge will not deploy a collector Pod (Collector page will
    # show "not configured").
    # Example:
    # image: "harbor.local.forwardnetworks.com/forward/fwd_collector:26.1.0-05"
    image: ""
    pullPolicy: "IfNotPresent"
    heapSizeGB: 0
    # Optional: registry pull secret to use for the collector image. When empty,
    # Skyforge falls back to the global Kubernetes imagePullSecret.
    imagePullSecretName: ""
    imagePullSecretNamespace: ""
  forwardApp:
    # Optional: mount a Forward on-prem "app cluster" UI behind Skyforge, under `pathPrefix`.
    # This assumes Forward is deployed separately in the same Kubernetes cluster (typically
    # in namespace `forward`) and exposes a ClusterIP service for the UI/API.
    #
    # Note: Mounting a complex web app under a path prefix can be brittle if the upstream
    # app hard-codes absolute URLs. We attempt to mitigate via proxy headers.
    enabled: false
    # External URL prefix on Skyforge.
    pathPrefix: "/fwd"
    # Optional root aliases for Forward canonical paths (for example /login).
    # This avoids redirect loops when Forward emits root-host redirects while
    # Skyforge exposes the app under a path prefix.
    rootAliases:
      enabled: false
      paths:
        - "/login"
        - "/logout"
    # Cookie path mode for Forward on-prem proxy:
    # - "prefix": rewrite Set-Cookie Path=/ -> Path=/fwd
    # - "alias": keep upstream cookie path (Path=/) for root alias mode
    cookiePathMode: "prefix"
    # Upstream Forward appserver Service.
    upstreamNamespace: "forward"
    upstreamService: "fwd-appserver"
    upstreamPort: 8080
    upstreamTLS: false
    # Protect the Forward UI behind Skyforge SSO (recommended).
    requireAuth: true
    autosleep:
      # Optional: auto-scale Forward on-prem workloads down to 0 after an idle window,
      # and wake them on-demand on the next /fwd request.
      enabled: false
      idleMinutes: 30
      wakeTimeoutSeconds: 180
    metricsPoll:
      # Forward network metrics polling cadence for historical snapshots.
      enabled: true
      intervalMinutes: 5
    onPrem:
      # Namespace and workload names used by admin backup reconcile endpoints.
      namespace: "forward"
      cbrS3Deployment: "fwd-cbr-s3-agent"
      cbrS3Secret: "fwd-cbr-s3-config"
  sessionTtl: "8h"
  pkiDefaultDays: 365
  sshDefaultDays: 30
  cookieSecure: true
  swaggerUrl: ""
  db:
    host: "db"
    port: 5432
    name: "skyforge_server"
    user: "skyforge_server"
    sslmode: "disable"
  health:
    httpChecks: "Edge|edge|http://skyforge-server Server|server|http://skyforge-server Testing|api|http://yaade/api-testing/|/api-testing/;API Docs|redoc|http://skyforge-server|/redoc/;Webhook Inbox|webhooks|http://skyforge-server"
    codeChecks: "Postgres|postgres|pg|db;Redis|redis|redis|redis;RADIUS|radius|radius|freeradius"
  admin:
    username: "skyforge"
    name: "Skyforge"
  provisioner:
    login: "skyforge-provisioner"
    name: "Skyforge Provisioner"
  ui:
    productName: "Skyforge"
    productSubtitle: "Automation Hub"
    logoUrl: "/assets/skyforge/FN-logo.svg"
    logoAlt: "Skyforge"
    headerBgUrl: "/assets/skyforge/header-background.png"
    supportText: "Need access? Contact your platform admin."
    supportUrl: ""
  minio:
    enabled: true
    consoleSubpath: "/minio-console"
    # Optional: LDAP group to grant MinIO Console access + read/write bucket access.
    # If empty, LDAP users may be able to authenticate but lack permissions.
    ldapConsoleGroup: ""
  sessionCookie: "skyforge_session"
  syslog:
    enabled: false
    # Syslog events are collected via Vector (DaemonSet, hostNetwork).
    # Host port to bind on each node (UDP); defaults to 514.
    hostPort: 514
    elasticsearch:
      # Optional: also forward syslog to in-cluster Elasticsearch (for demos).
      enabled: false
  snmpTraps:
    enabled: false
    # SNMP trap events are collected via Telegraf (DaemonSet, hostNetwork).
    # Host port to bind on each node (UDP); defaults to 162.
    hostPort: 162
  nodeMetrics:
    enabled: false
    interval: "10s"
  coder:
    enabled: true
    replicaCount: 1
    # Enables password auth for the bootstrap admin user (useful for demos).
    # Keep this true for strict SSO-only deployments.
    disablePasswordAuth: true
    oidcAutoLogin: true
    # Skyforge launch endpoint (/api/coder/launch) redirect target.
    # Must stay under /coder to hit the Coder route on the shared hostname.
    portalRedirectPath: "/coder/"
    persistentVolume:
      enabled: true
      size: 5Gi
      storageClassName: ""
    # Optional hostAliases injected into the Coder pod.
    # Useful when in-cluster DNS for the public Skyforge hostname lags behind
    # infra changes and Coder must still reach Dex discovery via that hostname.
    hostAliases: []
    # Optional bootstrap admin user (created once, idempotent).
    # If you leave these empty, you'll need to create the first user manually.
    bootstrap:
      username: ""
      email: ""
      passwordSecretName: "coder-admin-bootstrap"
      passwordSecretKey: "password"
    demo:
      enabled: false
  dex:
    enabled: true
    # When false, Dex config is expected to be provided via the `dex-config` Secret
    # (for example, via deploy/skyforge-secrets.yaml). When true, the chart
    # generates and manages `dex-config` based on the values below.
    manageConfig: false
    # Force Dex to always show the login/provider chooser screen, even if it
    # could auto-select based on prior sessions. Recommended when enabling
    # multiple connectors (for example, Google + Okta) so users can choose.
    alwaysShowLoginScreen: false
    # Optional: tweak Dex login page UX/branding. These settings are applied by an initContainer
    # that patches the Dex config from the `dex-config` Secret at startup.
    webTheme: ""
    logoUrl: "/assets/skyforge/FN-logo.svg"
    # Auth mode for Skyforge (via Dex). Supported:
    # - google: Google Workspace / Cloud Identity login (recommended for Forward)
    # - ldap: LDAP login (optional for OSS installs)
    # - okta: Okta login via Dex's generic OIDC connector
    authMode: "google"
    google:
      # Google OAuth client ID for Dex.
      # Redirect URI to configure in Google Cloud:
      #   https://<skyforge.hostname>/dex/callback
      clientID: ""
      # Optional restriction to specific Google Workspace domains.
      hostedDomains:
        - "forwardnetworks.com"
      # Where to read the Google OAuth client secret from.
      clientSecretSecretName: "dex-google-client-secret"
      clientSecretSecretKey: "dex-google-client-secret"
    # Optional: enable Okta login alongside the primary authMode connector.
    #
    # This adds an additional "Okta" button on the Dex login page; it does NOT
    # disable Google.
    okta:
      enabled: false
      name: "Okta"
      # OIDC issuer URL for your Okta auth server. Common defaults:
      # - "https://<your-domain>.okta.com" (Okta org authorization server; commonly available)
      # - "https://<your-domain>.okta.com/oauth2/<authServerId>" (custom auth server; requires API Access Management)
      # Note: if you try to use "/oauth2/default" and see an Okta error like
      # "E0000015 You do not have permission to access the feature you are requesting",
      # you likely do not have API Access Management enabled; use the org issuer instead.
      issuer: ""
      clientID: ""
      # Where to read the Okta OIDC client secret from.
      clientSecretSecretName: "dex-okta-client-secret"
      clientSecretSecretKey: "dex-okta-client-secret"
      # Optional scopes to request from Okta.
      scopes:
        - "openid"
        - "profile"
        - "email"
    # LDAP connector settings (used only when authMode=ldap).
    # NOTE: This is intentionally unconfigured by default.
    ldap:
      host: ""
      startTLS: false
      insecureSkipVerify: false
      bindDN: ""
      bindPW: ""
      usernamePrompt: "LDAP Username"
      userSearch:
        baseDN: ""
        filter: "(objectClass=person)"
        username: "uid"
        idAttr: "uid"
        emailAttr: "mail"
        nameAttr: "cn"

  apiDocs:
    # API docs UI (ReDoc).
    # Backwards compatible with the old `swaggerUI.enabled` flag.
    enabled: true
  swaggerUI:
    # Deprecated: use `skyforge.apiDocs.enabled` instead.
    enabled: true
  clabernetes:
    # Experimental: deploy containerlab topologies to k8s via clabernetes.
    enabled: false
    # NOTE: Skyforge relies on a small set of patches for vrnetlab native-mode support.
    # Override these in your `deploy/skyforge-values*.yaml` if you pin images by tag.
    managerImage: "ghcr.io/forwardnetworks/skyforge-clabernetes-manager:latest"
    launcherImage: "ghcr.io/forwardnetworks/skyforge-clabernetes-launcher:latest"
    replicaCount: 1
    # Clabernetes connectivity default.
    #
    # Skyforge uses clabernetes' built-in VXLAN connectivity manager for cross-node L2
    # adjacency (LLDP, CDP, etc) without requiring additional CNIs.
    connectivity: "vxlan"

  # Optional: Cloudflare Tunnel (cloudflared) to expose Skyforge externally without opening inbound ports.
  # Requires you to create the tunnel in Cloudflare and store either a tunnel token or credentials.json in a Secret.
  cloudflareTunnel:
    enabled: false
    # Mode:
    # - token: use a token Secret from Cloudflare Zero Trust (recommended for stable hostnames)
    # - credentials: use credentials.json + tunnelId (stable hostnames, explicit ingress config)
    # - quick: unauthenticated trycloudflare.com URL (dynamic, changes on restart)
    mode: "token"
    # For quick tunnel mode, set the HTTP Host header sent to the Ingress controller.
    # Defaults to skyforge.hostname.
    httpHostHeader: ""
    # External hostname to publish (defaults to skyforge.hostname).
    hostname: ""
    # Internal service URL to proxy to (Ingress handles routing by Host header).
    # When empty, the chart defaults to the Cilium gateway service in the release namespace.
    service: ""
    # Optional extra hostnames to publish.
    additionalHostnames: []
    # Metrics/health endpoint (used for readiness/liveness probes).
    metrics: "0.0.0.0:2000"
    replicaCount: 2

    # Token mode (recommended easiest path): create a Secret with key "token".
    tokenSecretName: ""
    tokenSecretKey: "token"

    # Credentials mode: create a Secret containing credentials.json + set tunnelId.
    tunnelId: ""
    credentialsSecretName: ""
    credentialsSecretKey: "credentials.json"

images:
  # Use non-DockerHub registries for common base images to avoid Docker Hub pull rate limits.
  alpine: "public.ecr.aws/docker/library/alpine:3.20"
  # Used by internal CronJobs to call Skyforge worker endpoints (no runtime apk installs).
  # Note: use GHCR mirror to avoid Docker Hub pull rate limits in k3s/containerd.
  curl: "ghcr.io/forwardnetworks/skyforge-curl:8.6.0-1"
  envoy: "envoyproxy/envoy:v1.31.2"
  python: "ghcr.io/forwardnetworks/skyforge-python:3.12-alpine"
  # Vector publishes official images under `timberio/vector` (Docker Hub).
  # NOTE: If Docker Hub rate limits are a concern, mirror this image into your registry.
  vector: "timberio/vector:0.44.0-debian"
  telegraf: "ghcr.io/forwardnetworks/skyforge-telegraf:1.33-alpine"
  freeradius: "ghcr.io/freeradius/freeradius-server:3.2.5"
  # Prefer GHCR (Docker Hub rate limits are painful in-cluster).
  gitea: "ghcr.io/go-gitea/gitea:1.24.6-rootless"
  coder: "ghcr.io/coder/coder:latest"
  yaade: "ghcr.io/esperotech/yaade:latest"
  dex: "ghcr.io/dexidp/dex:v2.37.0"
  minio: "quay.io/minio/minio:RELEASE.2024-11-07T00-52-20Z"
  minioMc: "quay.io/minio/mc:RELEASE.2024-11-17T19-35-25Z"
  minioMcRelease: "quay.io/minio/mc:RELEASE.2024-11-17T19-35-25Z"
  postgres: "public.ecr.aws/docker/library/postgres:15-alpine"
  redis: "public.ecr.aws/docker/library/redis:7-alpine"
  # Optional: Elastic Stack (disabled by default).
  elasticsearch: "docker.elastic.co/elasticsearch/elasticsearch:8.17.2"
  kibana: "docker.elastic.co/kibana/kibana:8.17.2"
  swaggerUi: "swaggerapi/swagger-ui:v5.11.0"
  technitiumDns: "docker.io/technitium/dns-server@sha256:94f2b90d63f03181421152157a8099ea2752b13fa30b6c96833859be8e93dfa9"
  # Mirror Atlas on GHCR to avoid Docker Hub rate limits in-cluster.
  atlas: "ghcr.io/forwardnetworks/skyforge-atlas:20260120-1139e29a"
  skyforgeNautobot: "ghcr.io/forwardnetworks/skyforge-nautobot:20260127-1253-277c9dc4"
  skyforgeNetbox: "ghcr.io/forwardnetworks/skyforge-netbox:4.5.0"
  skyforgeServer: "ghcr.io/forwardnetworks/skyforge-server:latest"
  # Optional dedicated task worker image (build-tagged to include the PubSub subscription).
  # Defaults to the same image as skyforgeServer for local/dev workflows.
  skyforgeServerWorker: "ghcr.io/forwardnetworks/skyforge-server:latest"
  nsq: "ghcr.io/forwardnetworks/skyforge-nsqd:v1.2.1"
  cloudflared: "cloudflare/cloudflared:2025.1.0"

nsq:
  enabled: true

kubernetes:
  # Optional image pull secrets to attach to service accounts created by the chart.
  # Example: ["ghcr-pull"] for private GHCR images.
  imagePullSecrets: []
  imagePullSecret:
    # Optional: create a pull secret in the release namespace.
    # Useful for OSS-style installs where you want a single script to set up
    # everything. Prefer supplying this via `--set-file` to avoid shell quoting.
    create: false
    name: "ghcr-pull"
    # Raw docker config JSON (contents of ~/.docker/config.json), NOT base64.
    dockerConfigJson: ""

secrets:
  create: true
  items:
    skyforge-session-secret:
      skyforge-session-secret: ""
    skyforge-admin-shared:
      password: ""
    skyforge-ldap-url:
      skyforge-ldap-url: ""
    skyforge-ldap-bind-template:
      skyforge-ldap-bind-template: ""
    skyforge-ldap-lookup-binddn:
      skyforge-ldap-lookup-binddn: ""
    skyforge-ldap-lookup-bindpassword:
      skyforge-ldap-lookup-bindpassword: ""
    skyforge-internal-token:
      skyforge-internal-token: ""
    skyforge-containerlab-jwt-secret:
      skyforge-containerlab-jwt-secret: ""
    skyforge-pki-ca-cert:
      skyforge-pki-ca-cert: ""
    skyforge-pki-ca-key:
      skyforge-pki-ca-key: ""
    skyforge-ssh-ca-key:
      skyforge-ssh-ca-key: ""
    skyforge-netlab-servers:
      # JSON array of netlab server configs. Example:
      # [{"name":"netlab","apiUrl":"https://netlab.local.forwardnetworks.com/netlab","apiInsecure":false,"apiToken":"<bearer>"}]
      skyforge-netlab-servers: "[]"
    netlab-runner-rsa:
      netlab-runner-rsa: ""
    postgres-skyforge-password:
      postgres-skyforge-password: ""
    db-netbox-password:
      db-netbox-password: ""
    db-nautobot-password:
      db-nautobot-password: ""
    db-gitea-password:
      db-gitea-password: ""
    db-dex-password:
      db-dex-password: ""
    db-skyforge-server-password:
      db-skyforge-server-password: ""
    dex-client-coder-secret:
      dex-client-coder-secret: ""
    dex-google-client-secret:
      dex-google-client-secret: ""
    dex-okta-client-secret:
      dex-okta-client-secret: ""
    skyforge-oidc-discovery-url:
      skyforge-oidc-discovery-url: ""
    skyforge-oidc-client-id:
      skyforge-oidc-client-id: ""
    skyforge-oidc-client-secret:
      skyforge-oidc-client-secret: ""
    skyforge-gemini-oauth-client-secret:
      skyforge-gemini-oauth-client-secret: ""
    yaade-admin-password:
      yaade-admin-password: ""
    gitea-secret-key:
      gitea-secret-key: ""
    coder-admin-bootstrap:
      password: ""
    gitea-ldap-binddn:
      gitea-ldap-binddn: ""
    gitea-ldap-bindpassword:
      gitea-ldap-bindpassword: ""
    object-storage-root-user:
      object-storage-root-user: ""
    object-storage-root-password:
      object-storage-root-password: ""
    object-storage-access-key:
      object-storage-access-key: ""
    object-storage-secret-key:
      object-storage-secret-key: ""
    netbox-superuser-api-token:
      netbox-superuser-api-token: ""
    netbox-api-token-peppers:
      netbox-api-token-peppers: ""
    netbox-secret-key:
      netbox-secret-key: ""
    nautobot-superuser-api-token:
      nautobot-superuser-api-token: ""
    nautobot-secret-key:
      nautobot-secret-key: ""
    object-storage-artifacts-access-key:
      object-storage-artifacts-access-key: ""
    object-storage-artifacts-secret-key:
      object-storage-artifacts-secret-key: ""
    aws-terraform-shared-credentials:
      aws-terraform-shared-credentials: ""
    proxy-tls:
      tls.crt: ""
      tls.key: ""
      _type: "kubernetes.io/tls"
    skyforge-ca-cert:
      skyforge-ca-cert: ""
