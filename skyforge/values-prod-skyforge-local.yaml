skyforge:
  hostname: skyforge.local.forwardnetworks.com
  domain: forwardnetworks.com
  publicUrl: https://skyforge.local.forwardnetworks.com
  gateway:
    addresses:
      - type: IPAddress
        value: "10.128.16.60"
  dex:
    manageConfig: true
    authMode: oidc
    oidc:
      issuer: "https://fn-prod.okta.com"
      clientID: "0oa108ytsjzRXoJw3698"
      insecureSkipEmailVerified: true
      # Secret remains pre-created in-cluster.
      clientSecretSecretName: "dex-oidc-client-secret"
      clientSecretSecretKey: "dex-oidc-client-secret"

  # Comma-separated usernames/emails that should see admin-only UI + APIs.
  # NOTE: Server-side admin checks are exact-match (no wildcards).
  adminUsers: "skyforge,craigjohnson,craigjohnson@forwardnetworks.com"

  encoreCfg:
    # Manage the API service typed config secret via Helm so feature flags and
    # defaults reliably propagate into the running pods.
    create: true

  # Provide ENCORE_RUNTIME_CONFIG from the chart's `files/infra.config.json`.
  # This keeps Skyforge server images portable (no baked-in infra config).
  encoreRuntimeConfig:
    # Deprecated: prefer `ENCORE_INFRA_CONFIG_PATH` which points at the mounted
    # `infra.config.json` ConfigMap. Leave these disabled to avoid version skew
    # and base64 encoding pitfalls across Encore runtime versions.
    create: false
    workerCreate: false

  netbox:
    enabled: false
  netboxUrl: https://skyforge.local.forwardnetworks.com/netbox
  netboxSsoUrl: https://skyforge.local.forwardnetworks.com/netbox

  nautobot:
    enabled: false
  nautobotUrl: https://skyforge.local.forwardnetworks.com/nautobot
  nautobotSsoUrl: https://skyforge.local.forwardnetworks.com/nautobot

  # ReDoc image pulls can be rate-limited; keep this disabled
  # in production unless you pin a mirrored image.
  redoc:
    enabled: true

  # Keep registry integration enabled for GHCR-backed workflows.
  registry:
    url: https://ghcr.io

  # Forward in-cluster collector image + pull credentials.
  # Pin to a concrete tag to avoid drifting when `latest` is retagged.
  forwardCollector:
    image: quay.io/forwardnetworks/cloud-collector:26.1.3-01
    imagePullSecretName: quay-pull
    imagePullSecretNamespace: skyforge
  forwardCluster:
    enabled: true
    baseUrl: "https://fwd-appserver.forward.svc.cluster.local:8443"
    skipTlsVerify: true

  # Enable Gitea provisioning for blueprint-backed workflows and E2E tests.
  # API URL is in-cluster; UI URL is the SSO-proxied external path.
  gitea:
    apiUrl: http://gitea:3000/api/v1
    url: https://skyforge.local.forwardnetworks.com/git

  # Pin netlab-c9s generator image so `netlab initial` has the artifacts it needs.
  netlabC9s:
    generatorImage: "ghcr.io/forwardnetworks/skyforge-netlab-generator:20260206-5b326c1"
    applierImage: "ghcr.io/forwardnetworks/skyforge-netlab-applier:20260206-b6a1937"

  # Skyforge deploys Containerlab topologies to Kubernetes via Clabernetes.
  # This must be enabled for E2E deploy tests and user deployments to reconcile.
  clabernetes:
    enabled: true
    managerImage: "ghcr.io/forwardnetworks/skyforge-clabernetes-manager:20260204-ceos-fastcli-3113843"
    launcherImage: "ghcr.io/forwardnetworks/skyforge-clabernetes-launcher:20260205-native-vxlan-localip-txoff-readyonly"

  # Current LDAP endpoint in this environment requires skipping TLS verification.
  # Set to false once LDAP cert trust is fixed.
  ldap:
    skipTlsVerify: true

images:
  # Pin images in prod so upgrades are repeatable (avoid implicit "latest").
  skyforgeServer: "ghcr.io/forwardnetworks/skyforge-server:20260219-settings-9fd7a93"
  # Worker can run from the same image tag as the API container.
  skyforgeServerWorker: "ghcr.io/forwardnetworks/skyforge-server:20260219-settings-9fd7a93-worker"

kubernetes:
  # Ensure private GHCR images can be pulled in the release namespace.
  imagePullSecrets: ["ghcr-pull"]

secrets:
  # Production/OSS baseline: secrets are pre-created in-cluster.
  create: false
  validatePrecreated: true
